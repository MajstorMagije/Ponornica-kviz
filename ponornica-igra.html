<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kviz: Tajne Ponornice</title>
    <style>
        /* --- DIZAJN I STIL (Osmansko-Bosanski Mix) --- */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            --ottoman-red: #800020;
            --antique-gold: #D4AF37;
            --dark-wood: #3E2723;
            --parchment: #FDF5E6;
            --deep-teal: #006064;
        }

        body {
            font-family: 'Lora', serif;
            background-color: var(--dark-wood);
            /* Pattern koji podsjeća na stari ćilim ili rezbariju */
            background-image: 
                radial-gradient(circle at 100% 150%, var(--ottoman-red) 24%, var(--dark-wood) 25%, var(--dark-wood) 28%, var(--ottoman-red) 29%, var(--ottoman-red) 36%, var(--dark-wood) 36%, var(--dark-wood) 40%, transparent 40%, transparent),
                radial-gradient(circle at 0    150%, var(--ottoman-red) 24%, var(--dark-wood) 25%, var(--dark-wood) 28%, var(--ottoman-red) 29%, var(--ottoman-red) 36%, var(--dark-wood) 36%, var(--dark-wood) 40%, transparent 40%, transparent),
                radial-gradient(circle at 50%  100%, var(--antique-gold) 10%, var(--dark-wood) 11%, var(--dark-wood) 23%, var(--antique-gold) 24%, var(--antique-gold) 30%, var(--dark-wood) 31%, var(--dark-wood) 43%, var(--antique-gold) 44%, var(--antique-gold) 50%, var(--dark-wood) 51%, var(--dark-wood) 63%, var(--antique-gold) 64%, var(--antique-gold) 71%, transparent 71%, transparent);
            background-size: 50px 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--dark-wood);
        }

        #game-container {
            background-color: var(--parchment);
            width: 90%;
            max-width: 800px;
            border: 8px solid var(--dark-wood);
            /* Dekorativni okvir */
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.5),
                0 0 30px var(--antique-gold);
            padding: 30px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        /* Ukrasni ćoškovi */
        .ornament {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: var(--antique-gold);
            clip-path: polygon(0 0, 100% 0, 100% 20%, 20% 20%, 20% 100%, 0 100%);
        }
        .top-left { top: 0; left: 0; }
        .top-right { top: 0; right: 0; transform: rotate(90deg); }
        .bottom-left { bottom: 0; left: 0; transform: rotate(270deg); }
        .bottom-right { bottom: 0; right: 0; transform: rotate(180deg); }

        h1.game-title {
            font-family: 'Cinzel Decorative', cursive;
            text-align: center;
            color: var(--ottoman-red);
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px var(--antique-gold);
            border-bottom: 3px double var(--ottoman-red);
            padding-bottom: 15px;
        }

        #score-box {
            text-align: center;
            font-size: 1.2em;
            color: var(--deep-teal);
            font-weight: bold;
            margin-bottom: 20px;
        }

        #question-area {
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: var(--ottoman-red);
            background: linear-gradient(145deg, var(--ottoman-red), #5a0016);
            color: var(--antique-gold);
            border: 2px solid var(--antique-gold);
            padding: 15px 20px;
            font-size: 1.1em;
            font-family: 'Lora', serif;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
        }

        .option-btn:hover {
            transform: translateY(-3px);
            background: var(--antique-gold);
            color: var(--ottoman-red);
            box-shadow: 0 0 15px var(--antique-gold);
        }

        .option-btn.correct {
            background: #2e7d32 !important; /* Zelena */
            color: white !important;
        }

        .option-btn.wrong {
            background: #c62828 !important; /* Crvena */
            color: white !important;
        }

        #feedback {
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            min-height: 40px;
            font-weight: bold;
        }

        /* AŽURIRANO: Dodan ID #restart-btn */
        #next-btn, #start-btn, #restart-btn {
            display: block;
            margin: 30px auto 0;
            padding: 15px 40px;
            font-size: 1.3em;
            background-color: var(--deep-teal);
            color: var(--parchment);
            border: 3px solid var(--antique-gold);
            cursor: pointer;
            font-family: 'Cinzel Decorative', cursive;
            transition: 0.3s;
            border-radius: 30px;
        }

        #next-btn:hover, #start-btn:hover, #restart-btn:hover {
            background-color: var(--antique-gold);
            color: var(--deep-teal);
            transform: scale(1.05);
        }

        /* EKRANI */
        .hidden { display: none; }
        #start-screen, #end-screen { text-align: center; }

        /* --- ANIMACIJE NAGRADE --- */
        @keyframes goldenFlash {
            0% { box-shadow: inset 0 0 0 var(--antique-gold); }
            50% { box-shadow: inset 0 0 100px var(--antique-gold), 0 0 50px var(--antique-gold); background-color: #fff8e1; }
            100% { box-shadow: inset 0 0 0 var(--antique-gold); background-color: var(--parchment); }
        }

        @keyframes scorePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); color: var(--antique-gold); text-shadow: 0 0 10px var(--antique-gold); }
            100% { transform: scale(1); }
        }

        .success-animation {
            animation: goldenFlash 0.8s ease-out;
        }
        
        .score-update {
            animation: scorePulse 0.6s ease-out;
        }

    </style>
</head>
<body>

<div id="game-container">
    <div class="ornament top-left"></div>
    <div class="ornament top-right"></div>
    <div class="ornament bottom-left"></div>
    <div class="ornament bottom-right"></div>

    <h1 class="game-title">⚜ Tajne Ponornice ⚜</h1>

    <div id="start-screen">
        <p>Dobrodošli u begovski konak. Dokažite svoje znanje o romanu Skendera Kulenovića.</p>
        <p>Pitanja idu od lakših ka težim.</p>
        <button type="button" id="start-btn" onclick="startGame()">Započni Putovanje</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="score-box">Rezultat: <span id="score">0</span></div>
        <div id="question-area"></div>
        <div class="options-grid" id="options-area">
            </div>
        <div id="feedback"></div>
        <button type="button" id="next-btn" class="hidden" onclick="nextQuestion()">Sljedeće Pitanje ➜</button>
    </div>

    <div id="end-screen" class="hidden">
        <h2>Putovanje je završeno.</h2>
        <p id="final-score-text"></p>
        <p id="final-message"></p>
        <button type="button" id="restart-btn" onclick="location.reload()">Igraj Ponovo</button>
    </div>
</div>

<script>
    // --- BAZA PITANJA (Od lakših ka težim) ---
    const questions = [
        // NIVO 1: LAKA (Osnovne činjenice)
        {
            question: "Ko je autor romana 'Ponornica'?",
            options: ["Meša Selimović", "Ivo Andrić", "Skender Kulenović", "Branko Ćopić"],
            correct: 2 // Indeks tačnog odgovora (0-3)
        },
        {
            question: "Kako se zove glavni lik i narator romana?",
            options: ["Tahir-beg", "Muhamed", "Senija", "Muftija"],
            correct: 1
        },
        {
            question: "U kojem historijskom periodu se odvija radnja romana?",
            options: ["Tokom Osmanskog carstva", "Nakon dolaska Austrougarske", "Za vrijeme Drugog svjetskog rata", "U modernoj BiH"],
            correct: 1
        },
        {
            question: "Iz kojeg grada se glavni lik vraća kući na početku romana?",
            options: ["Iz Beča", "Iz Sarajeva", "Iz Istanbula (Carigrada)", "Iz Kaira"],
            correct: 2
        },
        // NIVO 2: SREDNJA (Teme i likovi)
        {
            question: "Koji društveni sloj je u fokusu propadanja u romanu?",
            options: ["Seljaštvo", "Austrougarska birokratija", "Begovske porodice", "Trgovci"],
            correct: 2
        },
        {
            question: "Kakav je odnos glavnog lika, Muhameda, prema vjeri?",
            options: ["On je duboki vjernik i postaje imam.", "On je teolog koji je izgubio vjeru i sumnja.", "On je ravnodušan i ne razmišlja o tome.", "On prihvata novu, zapadnu religiju."],
            correct: 1
        },
        {
            question: "Koji ženski lik u romanu predstavlja tragičnu žrtvu patrijarhalnog odgoja i zatvorenosti?",
            options: ["Nura", "Rabija", "Senija", "Fatima"],
            correct: 2
        },
        // NIVO 3: TEŠKA (Simbolika i dublja analiza)
        {
            question: "Šta u romanu primarno simbolizuje naslov 'Ponornica'?",
            options: ["Samo rijeku Unu.", "Ljudsku podsvijest, skrivene tajne i potisnute emocije.", "Tajni prolaz ispod begovske kule.", "Propale finansijske investicije bega."],
            correct: 1
        },
        {
            question: "Muhamed se u romanu osjeća kao 'stranac'. Zašto?",
            options: ["Zato što ne zna bosanski jezik.", "Zato što ga porodica mrzi zbog novca.", "Zato što je razapet između Istoka (tradicije) i Zapada (modernizma), i ne pripada nigdje.", "Zato što želi da se vrati u Tursku."],
            correct: 2
        },
        {
            question: "Koju književnu formu Muhamed koristi unutar romana da bi iskazao svoje najdublje misli prijatelju?",
            options: ["Dnevnik", "Pismo (epistolarna forma)", "Pjesmu", "Novinski članak"],
            correct: 1
        },
        {
            question: "Dovrši poznati citat koji opisuje identitetsku krizu: 'Mi nismo ni osmanlijski ni evropski. Mi smo...'",
            options: ["...izgubljeni narod.'", "...treći svijet. Mi smo ničiji.'", "...most između svjetova.'", "...budućnost Balkana.'"],
            correct: 1
        },
        {
            question: "Dominantna atmosfera u romanu, koja opisuje stanje begovata, je:",
            options: ["Optimizam i nada u budućnost.", "Revolucionarni zanos i borba.", "Dekadencija (propadanje), melanholija i teška tišina.", "Humor i satira."],
            correct: 2
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let canClick = true;

    const container = document.getElementById('game-container');
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const endScreen = document.getElementById('end-screen');
    const questionArea = document.getElementById('question-area');
    const optionsArea = document.getElementById('options-area');
    const scoreDisplay = document.getElementById('score');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');

    function startGame() {
        startScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        canClick = true;
        nextBtn.classList.add('hidden');
        feedback.innerHTML = "";
        feedback.style.color = "inherit";
        container.classList.remove('success-animation');

        const q = questions[currentQuestion];
        questionArea.innerHTML = q.question;
        optionsArea.innerHTML = "";

        q.options.forEach((option, index) => {
            const btn = document.createElement('button');
            btn.type = 'button'; // Eksplicitno postavljamo tip za dinamički kreirana dugmad
            btn.innerText = option;
            btn.classList.add('option-btn');
            btn.onclick = () => checkAnswer(index, btn);
            optionsArea.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, btnElement) {
        if (!canClick) return;
        canClick = false;

        const correctIndex = questions[currentQuestion].correct;
        const allButtons = optionsArea.querySelectorAll('.option-btn');

        if (selectedIndex === correctIndex) {
            // --- TAČAN ODGOVOR ---
            score++;
            scoreDisplay.innerText = score;
            // Aktiviraj animaciju nagrade
            scoreDisplay.classList.add('score-update');
            container.classList.add('success-animation');
            
            btnElement.classList.add('correct');
            feedback.innerHTML = "⚜ Tačno! Begovski odgovor! ⚜";
            feedback.style.color = "#2e7d32";

            // Ukloni klasu animacije nakon što se završi da bi se mogla ponoviti
            setTimeout(() => {
                 scoreDisplay.classList.remove('score-update');
            }, 600);

        } else {
            // --- NETAČAN ODGOVOR ---
            btnElement.classList.add('wrong');
            // Pokaži koji je bio tačan
            allButtons[correctIndex].classList.add('correct');
            feedback.innerHTML = "Netačno. Više sreće drugi put.";
            feedback.style.color = "#c62828";
        }

        nextBtn.classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestion++;
        if (currentQuestion < questions.length) {
            loadQuestion();
        } else {
            endGame();
        }
    }

    function endGame() {
        quizScreen.classList.add('hidden');
        endScreen.classList.remove('hidden');
        
        document.getElementById('final-score-text').innerText = `Osvojili ste ${score} od ${questions.length} bodova.`;
        
        const finalMessage = document.getElementById('final-message');
        if (score === questions.length) {
            finalMessage.innerText = "Čestitamo! Vi ste pravi poznavalac Kulenovićevog djela. Vaše znanje je duboko poput ponornice.";
        } else if (score > questions.length / 2) {
            finalMessage.innerText = "Vrlo dobro! Pokazali ste zavidno znanje, ali neke tajne su ostale skrivene.";
        } else {
            finalMessage.innerText = "Vrijeme je da ponovo zaronite u knjigu. Mnoge tajne čekaju da budu otkrivene.";
        }
    }
</script>

</body>
</html>